version: '3.7'
services:
# You probably shouldn't touch this file, as it's modified and generated by the Python Frontend.
    example-camera:
      image: zemond/cameramain:v1.0
      container_name: example-camera
      environment:
        - TZ=America/Los_Angles
        # Have to have credentials plaintext here
        - RTSP_PATHS_CAM1_SOURCE=rtsp://admin:admin@10.0.0.0:554
        - RTSP_PROTOCOLS=tcp
        #- CLIP_SIZE=1073741824 # 1 Gigabyte
        - CLIP_SIZE=268435456 #256 Megabytes
        #- CLIP_SIZE=16777216 # 16 Megabytes
        - CLIP_LIMIT=48
        - CAMERA_NAME=example-camera
      volumes:
        # Where to store the shell files
        - ./zemond/:/zemond/
        # Where to store video perminantly
        - /mnt/NAS/Zemond-Storage/:/zemond-storage
        # Where to put the currently written file
        - ./zemond-temp:/zemond-temp
      restart: unless-stopped

    postgres-zemond:
      image: postgres:13.2-alpine
      container_name: postgres-zemond
      volumes:
        - ./postgres_data:/var/lib/postgresql/data
  #    ports:
  #      - "5432:5432/tcp"
      networks:
         zemond-nat:
           ipv4_address: 172.25.0.2
      environment:
        - POSTGRES_PASSWORD=psqlpass
        - PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/postgresql/13/bin
        - GOSU_VERSION=1.12
        - LANG=en_US.utf8
        - PG_MAJOR=13
        - PG_VERSION=13.2-1.pgdg100+1
        - PGDATA=/var/lib/postgresql/data
      restart: unless-stopped


networks:
  zemond-nat:
    external: true
    name: zemond-nat
